(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-877ef1e0"],{1473:function(e,t,r){},d7f9:function(e,t,r){"use strict";r.r(t);var a=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"box"},[r("el-breadcrumb",{attrs:{"separator-class":"el-icon-arrow-right"}},[r("el-breadcrumb-item",{attrs:{to:{path:"/home"}}},[e._v("首页")]),r("el-breadcrumb-item",[e._v("用户管理")]),r("el-breadcrumb-item",[e._v("用户列表")])],1),r("el-card",{staticClass:"box-card"},[r("div",{staticClass:"serach"},[r("el-input",{staticStyle:{width:"300px"},attrs:{placeholder:"请输入内容",clearable:""},on:{clear:function(t){return e.setUsers(e.userobj)}},model:{value:e.userobj.query,callback:function(t){e.$set(e.userobj,"query",t)},expression:"userobj.query"}},[r("template",{slot:"append"},[r("el-button",{on:{click:function(t){return e.setUsers(e.userobj)}}},[r("i",{staticClass:"el-icon-search"})])],1)],2),r("el-button",{staticStyle:{"margin-left":"30px"},attrs:{type:"primary"},on:{click:function(t){e.dialogVisible=!0}}},[e._v("添加用户")])],1),r("el-table",{staticStyle:{width:"100%"},attrs:{data:e.users.users,border:"",stripe:""}},[r("el-table-column",{attrs:{label:"#","min-width":"50",type:"index"}}),r("el-table-column",{attrs:{label:"姓名","min-width":"100",prop:"username"}}),r("el-table-column",{attrs:{label:"邮箱","min-width":"100",prop:"email"}}),r("el-table-column",{attrs:{label:"电话","min-width":"100",prop:"mobile"}}),r("el-table-column",{attrs:{label:"角色","min-width":"100",prop:"role_name"}}),r("el-table-column",{attrs:{label:"状态","min-width":"180"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("el-switch",{attrs:{"active-color":"#13ce66","inactive-color":"#ff4949"},on:{change:function(r){return e.changeState(t.row.id,t.row.mg_state)},click:function(r){return e.updata(t.row.id,t.row.mg_state)}},model:{value:t.row.mg_state,callback:function(r){e.$set(t.row,"mg_state",r)},expression:"scope.row.mg_state"}})]}}])}),r("el-table-column",{attrs:{label:"操作","min-width":"200"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"修改",placement:"top-start"}},[r("el-button",{attrs:{size:"mini",type:"primary",icon:"el-icon-edit"},on:{click:function(r){return e.updata(t.row.id,t.row.mg_state)}}})],1),r("el-button",{attrs:{slot:"reference",size:"mini",type:"danger",icon:"el-icon-delete"},on:{click:function(r){return e.dels(t.row.id)}},slot:"reference"}),r("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"分配权限",placement:"top-start"}},[r("el-button",{attrs:{type:"warning",icon:"el-icon-setting",size:"mini"}})],1)]}}])})],1),r("el-pagination",{staticStyle:{"margin-top":"10px"},attrs:{"page-sizes":[1,2,3],"page-size":e.userobj.pagesize,layout:"total, sizes, prev, pager, next, jumper",total:e.users.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}}),r("el-dialog",{attrs:{title:"添加新用户",visible:e.dialogVisible,width:"50%"},on:{"update:visible":function(t){e.dialogVisible=t}}},[r("el-form",{ref:"ruleForm",staticClass:"demo-ruleForm",attrs:{model:e.ruleForm,rules:e.rules,"label-width":"100px"}},[r("el-form-item",{attrs:{label:"用户名",prop:"username"}},[r("el-input",{model:{value:e.ruleForm.username,callback:function(t){e.$set(e.ruleForm,"username",t)},expression:"ruleForm.username"}})],1),r("el-form-item",{attrs:{label:"密码",prop:"password"}},[r("el-input",{model:{value:e.ruleForm.password,callback:function(t){e.$set(e.ruleForm,"password",t)},expression:"ruleForm.password"}})],1),r("el-form-item",{attrs:{label:"邮箱",prop:"email"}},[r("el-input",{model:{value:e.ruleForm.email,callback:function(t){e.$set(e.ruleForm,"email",t)},expression:"ruleForm.email"}})],1),r("el-form-item",{attrs:{label:"电话",prop:"mobile"}},[r("el-input",{model:{value:e.ruleForm.mobile,callback:function(t){e.$set(e.ruleForm,"mobile",t)},expression:"ruleForm.mobile"}})],1)],1),r("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[r("el-button",{on:{click:e.noadd}},[e._v("取 消")]),r("el-button",{attrs:{type:"primary"},on:{click:e.add}},[e._v("确 定")])],1)],1)],1),r("el-dialog",{attrs:{title:"修改用户信息",visible:e.dialogFormUpdata},on:{"update:visible":function(t){e.dialogFormUpdata=t}}},[r("el-form",{ref:"userObj",attrs:{model:e.userObj,rules:e.rules}},[r("el-form-item",{attrs:{label:"用户名",prop:"username"}},[r("el-input",{attrs:{autocomplete:"off",disabled:""},model:{value:e.userObj.username,callback:function(t){e.$set(e.userObj,"username",t)},expression:"userObj.username"}})],1),r("el-form-item",{attrs:{label:"邮箱",prop:"email"}},[r("el-input",{attrs:{autocomplete:"off"},model:{value:e.userObj.email,callback:function(t){e.$set(e.userObj,"email",t)},expression:"userObj.email"}})],1),r("el-form-item",{attrs:{label:"电话",prop:"mobile"}},[r("el-input",{attrs:{autocomplete:"off"},model:{value:e.userObj.mobile,callback:function(t){e.$set(e.userObj,"mobile",t)},expression:"userObj.mobile"}})],1)],1),r("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[r("el-button",{on:{click:function(t){return e.noUpdata()}}},[e._v("取 消")]),r("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.okUpdata()}}},[e._v("确 定")])],1)],1)],1)},s=[];function n(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}r("96cf");var o=r("1da1"),i=r("b775"),l={name:"",data:function(){return{users:{},userobj:{pagesize:2,pagenum:1,query:""},ruleForm:{username:"",password:"",email:"",mobile:""},rules:{username:[{required:!0,message:"请输入用户名",trigger:"blur"},{min:3,max:8,message:"长度在 3 到 8 个字符",trigger:"blur"}],password:[{required:!0,message:"请输入密码",trigger:"blur"},{min:6,max:18,message:"长度在 6 到 18 个字符",trigger:"blur"}],email:[{required:!0,message:"请输入邮箱",trigger:"blur"}],mobile:[{required:!0,message:"请输入手机号",trigger:"blur"}]},dialogVisible:!1,dialogFormUpdata:!1,userObj:{}}},created:function(){},mounted:function(){this.setUsers()},methods:{setUsers:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){var r,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(i["v"])(e.userobj);case 2:r=t.sent,a=r.data,e.users=a.data;case 5:case"end":return t.stop()}}),t)})))()},handleSizeChange:function(e){this.userobj.pagesize=e,this.setUsers(this.userobj)},handleCurrentChange:function(e){this.userobj.pagenum=e,this.setUsers(this.userobj)},add:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){var r,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.dialogVisible=!1,t.next=3,Object(i["b"])(e.ruleForm);case 3:r=t.sent,a=r.data,200==a.meta.status?(e.$message({type:"success",message:a.meta.msg}),e.setUsers()):e.$message({type:"error",message:a.meta.msg}),console.log(a);case 7:case"end":return t.stop()}}),t)})))()},noadd:function(){this.dialogVisible=!1,this.setUsers(this.userobj),this.ruleForm={}},updata:function(e,t){var r=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){var a,s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(i["n"])(e);case 2:a=t.sent,s=a.data,200==s.meta.status?(r.dialogFormUpdata=!0,r.userObj=s.data):console.log(s.meta.msg);case 5:case"end":return t.stop()}}),t)})))()},okUpdata:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){var r,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.dialogFormUpdata=!1,t.next=3,Object(i["t"])(e.userObj.id,e.userObj);case 3:r=t.sent,a=r.data,200==a.meta.status?(e.$message({type:"success",message:a.meta.msg}),e.setUsers()):(e.dialogFormUpdata=!0,e.$message({type:"error",message:a.meta.msg}));case 6:case"end":return t.stop()}}),t)})))()},noUpdata:function(){this.dialogFormUpdata=!1,this.userObj={}},dels:function(e){var t=this;this.$confirm("此操作将永久删除该用户, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){Object(i["d"])(e).then((function(e){t.$message({type:"success",message:e.data.meta.msg}),t.setUsers(t.userobj)}))})).catch((function(){t.$message({type:"info",message:"已取消删除"})}))},changeState:function(e,t){var r=this;return Object(o["a"])(regeneratorRuntime.mark((function a(){var s,o;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.next=2,Object(i["c"])(n({id:e,state:t},"state",t));case 2:s=a.sent,o=s.data,200==o.meta.status?r.$message({type:"success",message:o.meta.msg}):r.$message({type:"error",message:o.meta.msg});case 5:case"end":return a.stop()}}),a)})))()}},watch:{dialogVisible:{handler:function(e){if(e)return!1;this.ruleForm.username="",this.ruleForm.password="",this.ruleForm.email="",this.ruleForm.mobile=""}}}},u=l,c=(r("f602"),r("2877")),m=Object(c["a"])(u,a,s,!1,null,"6bffa35f",null);t["default"]=m.exports},f602:function(e,t,r){"use strict";var a=r("1473"),s=r.n(a);s.a}}]);
//# sourceMappingURL=chunk-877ef1e0.b481cc59.js.map