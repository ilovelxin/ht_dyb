(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-a36b2c38"],{1893:function(e,t,r){"use strict";r.r(t);var a=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"box"},[r("el-breadcrumb",{attrs:{"separator-class":"el-icon-arrow-right"}},[r("el-breadcrumb-item",{attrs:{to:{path:"/home"}}},[e._v("首页")]),r("el-breadcrumb-item",[e._v("权限管理")]),r("el-breadcrumb-item",[e._v("角色列表")])],1),r("el-card",{staticClass:"box-card"},[r("div",{staticStyle:{"margin-bottom":"15px"}},[r("el-button",{attrs:{type:"primary"},on:{click:function(t){e.dialogAddRole=!0}}},[e._v("添加角色")])],1),r("el-table",{staticStyle:{width:"100%"},attrs:{data:e.tableData,border:""}},[r("el-table-column",{attrs:{type:"expand"},scopedSlots:e._u([{key:"default",fn:function(t){return e._l(t.row.children,(function(a,n){return r("el-row",{key:n,staticStyle:{width:"100%"},attrs:{type:"flex"}},[r("el-col",{attrs:{span:4,id:"one"}},[r("div",{staticClass:"grid-content bg-purple"},[r("el-tag",{attrs:{closable:"",type:"primary",effect:"dark"},on:{close:function(r){return e.delRig(t.row.id,a.id)}}},[e._v(" "+e._s(a.authName)+" ")])],1)]),r("el-col",{staticStyle:{border:"1px solid #ddd"},attrs:{span:20}},[r("div",{staticClass:"grid-content bg-purple"},e._l(a.children,(function(a,n){return r("el-row",{key:n,staticStyle:{"border-bottom":"1px solid #ddd"}},[r("el-col",{attrs:{span:4}},[r("div",{staticClass:"grid-content bg-purple",staticStyle:{margin:"5px 0 0 40px"}},[r("el-tag",{attrs:{closable:"",type:"success",effect:"dark"},on:{close:function(r){return e.delRig(t.row.id,a.id)}}},[e._v(" "+e._s(a.authName)+" ")])],1)]),r("el-col",{attrs:{span:20}},[r("div",{staticClass:"grid-content bg-purple"},e._l(a.children,(function(a,n){return r("el-tag",{key:n,staticStyle:{margin:"5px 5px"},attrs:{closable:"",type:"warning",effect:"dark"},on:{close:function(r){return e.delRig(t.row.id,a.id)}}},[e._v(" "+e._s(a.authName)+" ")])})),1)])],1)})),1)])],1)}))}}])}),r("el-table-column",{attrs:{label:"#",type:"index"}}),r("el-table-column",{attrs:{label:"角色名称",prop:"roleName"}}),r("el-table-column",{attrs:{label:"角色描述",prop:"roleDesc"}}),r("el-table-column",{attrs:{label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("el-button",{attrs:{type:"primary",icon:"el-icon-edit",size:"mini"},on:{click:function(r){return e.getRolse(t.row.id)}}},[e._v("编辑")]),r("el-button",{attrs:{type:"danger",icon:"el-icon-delete",size:"mini"},on:{click:function(r){return e.delRoles(t.row.id)}}},[e._v("删除")]),r("el-button",{attrs:{type:"warning",icon:"el-icon-setting",size:"mini"},on:{click:function(r){return e.addRight(t.row.id)}}},[e._v("分配权限")])]}}])})],1)],1),r("el-dialog",{attrs:{title:"添加角色",visible:e.dialogAddRole},on:{"update:visible":function(t){e.dialogAddRole=t}}},[r("el-form",{ref:"role",staticClass:"demo-dynamic",attrs:{model:e.role,"label-width":"100px"}},[r("el-form-item",{attrs:{prop:"roleName",label:"角色名称",rules:[{required:!0,message:"请输入角色名称",trigger:"blur"},{min:3,max:8,message:"长度在 3 到 8 个字符",trigger:"blur"}]}},[r("el-input",{model:{value:e.role.roleName,callback:function(t){e.$set(e.role,"roleName",t)},expression:"role.roleName"}})],1),r("el-form-item",{attrs:{prop:"roleName",label:"角色描述",rules:[{required:!0,message:"请输入角色描述",trigger:"blur"}]}},[r("el-input",{model:{value:e.role.roleDesc,callback:function(t){e.$set(e.role,"roleDesc",t)},expression:"role.roleDesc"}})],1)],1),r("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[r("el-button",{on:{click:function(t){e.dialogAddRole=!1}}},[e._v("取 消")]),r("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.addRoles("role")}}},[e._v("确 定")])],1)],1),r("el-dialog",{attrs:{title:"添加角色",visible:e.dialogUpdataRole},on:{"update:visible":function(t){e.dialogUpdataRole=t}}},[r("el-form",{ref:"getroles",staticClass:"demo-dynamic",attrs:{model:e.getroles,"label-width":"100px"}},[r("el-form-item",{attrs:{prop:"roleName",label:"角色名称",rules:[{required:!0,message:"请输入角色名称",trigger:"blur"},{min:2,max:8,message:"长度在 2 到 8 个字符",trigger:"blur"}]}},[r("el-input",{model:{value:e.getroles.roleName,callback:function(t){e.$set(e.getroles,"roleName",t)},expression:"getroles.roleName"}})],1),r("el-form-item",{attrs:{prop:"roleName",label:"角色描述",rules:[{required:!0,message:"请输入角色描述",trigger:"blur"}]}},[r("el-input",{model:{value:e.getroles.roleDesc,callback:function(t){e.$set(e.getroles,"roleDesc",t)},expression:"getroles.roleDesc"}})],1)],1),r("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[r("el-button",{on:{click:function(t){e.dialogUpdataRole=!1}}},[e._v("取 消")]),r("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.updataRoles("getroles")}}},[e._v("确 定")])],1)],1),r("el-dialog",{attrs:{title:"收货地址",visible:e.dialogJur},on:{"update:visible":function(t){e.dialogJur=t}}},[r("el-tree",{attrs:{data:e.jurs,"show-checkbox":"","node-key":"id","default-expand-all":""},scopedSlots:e._u([{key:"default",fn:function(t){t.node;var a=t.data;return r("span",{staticClass:"custom-tree-node"},[r("span",[e._v(e._s(a.authName))])])}}])}),r("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[r("el-button",{on:{click:function(t){e.dialogJur=!1}}},[e._v("取 消")]),r("el-button",{attrs:{type:"primary"},on:{click:function(t){e.dialogJur=!1}}},[e._v("确 定")])],1)],1)],1)},n=[],o=(r("96cf"),r("1da1")),s=r("b775"),l={name:"",data:function(){return{tableData:[],role:{roleName:"",roleDesc:""},dialogAddRole:!1,getroles:{roleName:"",roleDesc:""},dialogUpdataRole:!1,dialogJur:!1,jurs:[]}},created:function(){},mounted:function(){this.roles()},methods:{roles:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){var r,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(s["g"])();case 2:r=t.sent,a=r.data,e.tableData=a.data;case 5:case"end":return t.stop()}}),t)})))()},addRoles:function(e){var t=this;this.$refs[e].validate(function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(r){var a,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!r){e.next=9;break}return e.next=3,Object(s["a"])(t.role);case 3:a=e.sent,n=a.data,console.log(n),201==n.meta.status&&(t.dialogAddRole=!1,t.$message({type:"success",message:n.meta.msg}),t.roles()),e.next=10;break;case 9:return e.abrupt("return",!1);case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())},delRoles:function(e){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function r(){var a,n;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.next=2,Object(s["f"])(e);case 2:a=r.sent,n=a.data,t.roles(),n.meta.status,t.$message({type:"success",message:n.meta.msg});case 6:case"end":return r.stop()}}),r)})))()},getRolse:function(e){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function r(){var a,n;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return t.dialogUpdataRole=!0,r.next=3,Object(s["h"])(e);case 3:a=r.sent,n=a.data,200==n.meta.status&&(t.getroles=n.data);case 6:case"end":return r.stop()}}),r)})))()},updataRoles:function(e){var t=this;this.$refs[e].validate(function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(r){var a,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!r){e.next=9;break}return e.next=3,Object(s["m"])(t.getroles.roleId,t.getroles);case 3:a=e.sent,n=a.data,console.log(n),200==n.meta.status&&(t.dialogUpdataRole=!1,t.$message({type:"success",message:n.meta.msg}),t.roles()),e.next=10;break;case 9:return e.abrupt("return",!1);case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())},delRig:function(e,t){var r=this,a=this;this.$confirm("此操作将永久删除该权限, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(Object(o["a"])(regeneratorRuntime.mark((function n(){var o,l;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.next=2,Object(s["e"])(e,t);case 2:o=n.sent,l=o.data,200==l.meta.status?(r.$message({type:"success",message:l.meta.msg}),a.roles()):r.$message({type:"error",message:l.meta.msg});case 5:case"end":return n.stop()}}),n)})))).catch((function(){r.$message({type:"info",message:"已取消删除"})}))},addRight:function(e){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function e(){var r,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.dialogJur=!0,e.next=3,Object(s["l"])("tree");case 3:r=e.sent,a=r.data,t.jurs=a.data,console.log(t.jurs);case 7:case"end":return e.stop()}}),e)})))()}},watch:{dialogAddRole:{handler:function(e){if(e)return!1;this.role={roleName:"",roleDesc:""}}}}},i=l,c=(r("80a9"),r("2877")),u=Object(c["a"])(i,a,n,!1,null,"d6ade7b0",null);t["default"]=u.exports},"4b42":function(e,t,r){},"80a9":function(e,t,r){"use strict";var a=r("4b42"),n=r.n(a);n.a}}]);
//# sourceMappingURL=chunk-a36b2c38.a236c252.js.map